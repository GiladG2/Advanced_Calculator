import pytest

from Parser import evaluate
from exceptions import *
def test():
    assert evaluate("2(3+4)(5-2)") == 42
    assert evaluate("-(2+3)(4-6)") == 10
    assert evaluate("(((2+3)*(4+5)-(6@8))^((3%2)+1))-(((5$3)&4))") == 1440.0
    assert evaluate("2(3(4(5+6))) - (7! + (3^2^2)%5) + (((8@4)$6)&2)") == -4775
    assert evaluate("-(3+5)*(2^3^2) + ((4$2)&(9@3)) - (6%(2+1))") == -4092
    assert evaluate("(((1+2)^(2+1)) @ (3$5)) * (4&2) + (5!-3)") == 149
    assert evaluate("(2+3)(4+5)(6-1) - ((7@3)%2) + (8$1)") == 232
    assert evaluate("(((2^3)^2 - (3*4) + (5@7)) & (9$2)) + (6%4)") == 11
    assert evaluate("-(2(3+4)^2) + (((5@5)$6)&(7-3)) - (4!%3)") == -94
    assert evaluate("((3+5)*(2^4) - (6@2))") == 124
    assert evaluate("(((2+ (3$1)) @ (4&2)) * ((5-3)^(2+1)) - (6%4))") == 34.0
    assert evaluate("((2^3 + 3^2)%(5-2)) * (4@6) + (8$5)") == 13.0
    assert evaluate("((((3@5)$2)&(4+6)) * (2(1+2)) - (7%3))") == 23
    assert evaluate("((2^3^2 + (3+4)(5+6)) % (7@3) + (8$2))") == 12.0
    assert evaluate("(((2+2)^(3) - (4*5) + (6@8)) & (3$7) + (5!))") == 124
    assert evaluate("(-((2^3) * (4@ (3+1))) + (((5$2)&(6-1)) - (3%2)))") == -256
    assert evaluate("(((2+3)*(4+5) - (6@8)) + ((7$3)&(2@4)) - (5!))") == -95
    assert evaluate("(2(3+4)(5-2) + (6^2 % (1+2)) - ((4@2)$3))") == 49
    assert evaluate("(((3+3)^(2+1) @ (5+1)) - (7%4) + (2(1+1)))") == 58.0
    assert evaluate("((((2@8)$3)&(9-4)) * (3^2) - ((5+1)(2+2)))") == 18
    assert evaluate("(-((3+2)^2) + (((4$6)&(7@1))) + (5! - (2%1)))") == 143
    assert evaluate("((((2+3)*(3+4) - (5@7))^(2)) + ((6$1)&(4+2)))") == 676
    assert evaluate("(((3^2+2^3)@(4+1)) - ((6%4) + (2(2+1))))") == 2.0
    assert evaluate("((((5+5)^(2) - (3@1)) & ((4$2)+1) + (2*3(1+1))))") == 50
    assert evaluate("(-((2(3+1) + (4^2))) + (((5@3)$2)) - (6%5))") == -24
    assert evaluate("(((2^3)^(1+1) + (3*4) - (5@7)) % (6-2) + (8&3))") == 3
    assert evaluate("(((4+1)*(3+2)@(2+4)) - ((5$3)&(1+1)) + (2^3))") == 26.0
    assert evaluate("(((3+2)(4+1) - (6@2))^(2) + ((7$5)&(3+1)) - (4!))") == 366
    assert evaluate("((2(3(4+1)) + (5^2 - 3@1)) & (8$2) + (6%4))") == 8
    assert evaluate("((((2+(3$1))^(4-2) * (6@2) - (3! + (5%2))) + (7&9)))") == 75

test()

